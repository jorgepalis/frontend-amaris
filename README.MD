# üåê Frontend Next.js - Sistema de Gesti√≥n de Fondos

Frontend moderno desarrollado con Next.js, TypeScript y Tailwind CSS que consume la API REST del backend Django. Implementa una interfaz intuitiva para la gesti√≥n de fondos de inversi√≥n con funcionalidades completas de suscripci√≥n, cancelaci√≥n y consulta de informaci√≥n.

## üöÄ Caracter√≠sticas Principales

### üìä **Gesti√≥n de Fondos**
- ‚úÖ Listado interactivo de fondos disponibles
- ‚úÖ Detalles completos de cada fondo (nombre, categor√≠a, monto m√≠nimo)
- ‚úÖ Suscripci√≥n a fondos con validaci√≥n en tiempo real
- ‚úÖ Cancelaci√≥n de suscripciones activas
- ‚úÖ Visualizaci√≥n de estado de inversiones

### üë§ **Dashboard de Usuario**
- ‚úÖ Informaci√≥n personal del usuario
- ‚úÖ Saldo disponible actualizado en tiempo real
- ‚úÖ Fondos activos con detalles de inversi√≥n
- ‚úÖ Historial completo de transacciones
- ‚úÖ Gesti√≥n de preferencias de notificaci√≥n

### üîî **Sistema de Notificaciones**
- ‚úÖ Configuraci√≥n de preferencias (Email/SMS)
- ‚úÖ Notificaciones en tiempo real de transacciones
- ‚úÖ Interfaz intuitiva para cambio de preferencias

### üé® **Interfaz de Usuario**
- ‚úÖ **Design System moderno** con Tailwind CSS
- ‚úÖ **Responsive Design** - Compatible con m√≥viles y escritorio
- ‚úÖ **Componentes reutilizables** - Arquitectura escalable
- ‚úÖ **Loading States** - Feedback visual en todas las operaciones
- ‚úÖ **Error Handling** - Manejo elegante de errores de API

## üõ†Ô∏è Tecnolog√≠as Utilizadas

- **Next.js 14** - Framework React con App Router
- **TypeScript** - Tipado est√°tico para mayor seguridad
- **Tailwind CSS** - Framework CSS utilitario
- **React Hooks** - Estado y efectos modernos
- **Fetch API** - Comunicaci√≥n con backend REST
- **ESLint + Prettier** - Calidad y formato de c√≥digo

## üì° Integraci√≥n con Backend

### **Configuraci√≥n de API:**
El frontend se conecta al backend Django REST API:

```typescript
// Configuraci√≥n base de la API
const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api'

// Endpoints principales
const ENDPOINTS = {
  funds: '/funds/',
  user: '/user/',
  userBalance: '/user/balance/',
  userFunds: '/user/funds/',
  userTransactions: '/user/transactions/',
  userNotifications: '/user/notifications/'
}
```

### **Funcionalidades Implementadas:**

1. **Gesti√≥n de Fondos:**
   - Listado: `GET /api/funds/`
   - Detalle: `GET /api/funds/{id}/`
   - Suscripci√≥n: `POST /api/funds/{id}/subscribe/`
   - Cancelaci√≥n: `POST /api/funds/{id}/cancel/`

2. **Informaci√≥n de Usuario:**
   - Perfil: `GET /api/user/`
   - Saldo: `GET /api/user/balance/`
   - Fondos activos: `GET /api/user/funds/`
   - Historial: `GET /api/user/transactions/`

3. **Preferencias:**
   - Consultar: `GET /api/user/notifications/`
   - Actualizar: `PUT /api/user/notifications/`

## üîß Configuraci√≥n e Instalaci√≥n Local

### **1. Clonar el Proyecto**
```bash
# Navegar al directorio del frontend
cd frontend
```

### **2. Instalar Dependencias**
```bash
# Instalar dependencias de Node.js
npm install

# O usando yarn
yarn install
```

### **3. Configurar Variables de Entorno**
Crear archivo `.env.local` en la ra√≠z del frontend:
```env
# URL del backend API
NEXT_PUBLIC_API_URL=http://localhost:8000/api

# Configuraci√≥n de producci√≥n (opcional)
NEXT_PUBLIC_API_URL_PROD=https://api.tudominio.com/api
```

### **4. Ejecutar en Modo Desarrollo**
```bash
# Iniciar servidor de desarrollo
npm run dev

# O usando yarn
yarn dev

# La aplicaci√≥n estar√° disponible en: http://localhost:3000
```

### **5. Scripts Disponibles**

```bash
# Desarrollo
npm run dev          # Servidor de desarrollo en puerto 3000

# Construcci√≥n
npm run build        # Generar build de producci√≥n
npm run start        # Servidor de producci√≥n

# Calidad de c√≥digo
npm run lint         # Ejecutar ESLint
npm run lint:fix     # Corregir errores de ESLint autom√°ticamente

# Exportaci√≥n est√°tica (para despliegue)
npm run export       # Generar sitio est√°tico en carpeta /out
```

## üì± Estructura de Componentes

```
frontend/
‚îú‚îÄ‚îÄ app/                     # App Router de Next.js 14
‚îÇ   ‚îú‚îÄ‚îÄ components/         # Componentes reutilizables
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FundCard.tsx   # Tarjeta de fondo individual
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserDashboard.tsx # Dashboard principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TransactionHistory.tsx # Historial de transacciones
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NotificationSettings.tsx # Configuraci√≥n de notificaciones
‚îÇ   ‚îú‚îÄ‚îÄ funds/             # P√°ginas de fondos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx       # Listado de fondos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/page.tsx  # Detalle de fondo
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/         # Dashboard de usuario
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx       # P√°gina principal del dashboard
‚îÇ   ‚îú‚îÄ‚îÄ globals.css        # Estilos globales con Tailwind
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx         # Layout principal
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx           # P√°gina de inicio
‚îú‚îÄ‚îÄ public/                # Archivos est√°ticos
‚îú‚îÄ‚îÄ types/                 # Definiciones TypeScript
‚îÇ   ‚îú‚îÄ‚îÄ fund.ts           # Tipos para fondos
‚îÇ   ‚îú‚îÄ‚îÄ user.ts           # Tipos para usuario
‚îÇ   ‚îî‚îÄ‚îÄ transaction.ts    # Tipos para transacciones
‚îú‚îÄ‚îÄ lib/                   # Utilidades
‚îÇ   ‚îú‚îÄ‚îÄ api.ts            # Cliente de API
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts          # Funciones auxiliares
‚îú‚îÄ‚îÄ next.config.js         # Configuraci√≥n de Next.js
‚îú‚îÄ‚îÄ tailwind.config.js     # Configuraci√≥n de Tailwind
‚îú‚îÄ‚îÄ tsconfig.json          # Configuraci√≥n de TypeScript
‚îî‚îÄ‚îÄ package.json           # Dependencias y scripts
```

## üöÄ Despliegue en AWS con CloudFormation

### **Prerequisitos AWS:**
- **Cuenta de AWS** con permisos para S3 y CloudFront
- **CLI de AWS** configurado con credenciales apropiadas
- **Dominio registrado** (opcional para SSL personalizado)

### **Paso 1: Generar Build de Producci√≥n**

Preparar los archivos est√°ticos para despliegue:

```bash
# 1. Configurar variable de entorno de producci√≥n
echo "NEXT_PUBLIC_API_URL=https://api.tudominio.com/api" > .env.local

# 2. Generar build optimizado
npm run build

# 3. Exportar sitio est√°tico
npm run export

# 4. Verificar que se gener√≥ la carpeta /out
ls -la out/
# Debe contener: index.html, _next/, assets/, etc.
```

### **Paso 2: Desplegar Infraestructura con CloudFormation**

1. **Subir la plantilla de CloudFormation:**
   ```bash
   # Desde la consola de AWS CloudFormation
   # 1. Ir a CloudFormation > Create Stack
   # 2. Subir el archivo: frontend/cloudformation/frontend.yaml
   # 3. Configurar par√°metros del stack
   ```

2. **Par√°metros de la plantilla:**
   - `BucketName`: Nombre √∫nico para el bucket S3 (ej: `mi-app-fondos-frontend`)

3. **Ejecutar el stack:**
   ```bash
   # Alternativamente desde CLI
   aws cloudformation create-stack \
     --stack-name frontend-fondos-stack \
     --template-body file://frontend/cloudformation/frontend.yaml \
     --parameters ParameterKey=BucketName,ParameterValue=mi-app-fondos-frontend
   ```

### **Paso 3: Subir Archivos Est√°ticos a S3**

Una vez creada la infraestructura, subir el contenido de la carpeta `/out`:

```bash
# Sincronizar carpeta out con S3
aws s3 sync ./out s3://nombre-bucket-s3/

# Ejemplo con nombre espec√≠fico
aws s3 sync ./out s3://mi-app-fondos-frontend/

# Verificar que los archivos se subieron correctamente
aws s3 ls s3://mi-app-fondos-frontend/ --recursive

# Configurar cache headers para optimizaci√≥n (opcional)
aws s3 sync ./out s3://mi-app-fondos-frontend/ \
  --cache-control "public, max-age=31536000" \
  --exclude "*.html" \
  --exclude "*.json"

# Archivos HTML sin cache para actualizaciones r√°pidas
aws s3 sync ./out s3://mi-app-fondos-frontend/ \
  --cache-control "public, max-age=0, must-revalidate" \
  --include "*.html" \
  --include "*.json"
```

### **Arquitectura de Despliegue:**

```
Internet
   ‚Üì
CloudFront CDN (HTTPS)
   ‚Üì
Origin Access Control (OAC)
   ‚Üì
S3 Bucket (Static Files)
   ‚Üì
Next.js Export (/out)
```

### **Verificaci√≥n del Despliegue:**

```bash
# Obtener URLs del stack de CloudFormation
aws cloudformation describe-stacks \
  --stack-name frontend-fondos-stack \
  --query 'Stacks[0].Outputs'

# Verificar que el sitio est√© funcionando
curl -I https://d1234567890123.cloudfront.net/

# Verificar archivos espec√≠ficos
curl https://d1234567890123.cloudfront.net/_next/static/css/...
```

### **URLs de la Aplicaci√≥n:**

- **CloudFront URL:** `https://d1234567890123.cloudfront.net`
- **S3 Website URL:** `http://bucket-name.s3-website-region.amazonaws.com`
- **P√°ginas principales:**
  - Dashboard: `https://d1234567890123.cloudfront.net/dashboard`
  - Fondos: `https://d1234567890123.cloudfront.net/funds`

## üîÑ Proceso de Actualizaci√≥n

Para actualizar la aplicaci√≥n despu√©s de cambios:

```bash
# 1. Realizar cambios en el c√≥digo
# 2. Regenerar build
npm run build && npm run export

# 3. Sincronizar con S3
aws s3 sync ./out s3://nombre-bucket-s3/ --delete

# 4. Invalidar cache de CloudFront (opcional)
aws cloudfront create-invalidation \
  --distribution-id E1234567890123 \
  --paths "/*"
```

## üåê Configuraci√≥n de Dominio Personalizado

### **Paso 1: Certificado SSL en ACM**
```bash
# 1. Ir a AWS Certificate Manager (ACM) en us-east-1
# 2. Request certificate para: app.tudominio.com
# 3. Validar por DNS
# 4. Copiar ARN del certificado
```

### **Paso 2: Actualizar CloudFront Distribution**
```bash
# En la consola de CloudFront:
# 1. Editar la distribuci√≥n creada
# 2. Agregar Alternate Domain Names: app.tudominio.com
# 3. Seleccionar Custom SSL Certificate (ACM)
# 4. Guardar cambios y esperar propagaci√≥n
```

### **Paso 3: Configurar DNS**
```bash
# En Cloudflare o tu proveedor DNS:
# 1. Crear registro CNAME:
#    - Name: app
#    - Content: d1234567890123.cloudfront.net
# 2. Guardar cambios
```

## üìä Optimizaciones de Rendimiento

### **Build Optimizations:**
- ‚úÖ **Static Export** - Sitio completamente est√°tico
- ‚úÖ **Code Splitting** - Carga diferida de componentes
- ‚úÖ **Image Optimization** - Im√°genes optimizadas autom√°ticamente
- ‚úÖ **Bundle Analysis** - An√°lisis de tama√±o de paquetes
- ‚úÖ **Minification** - CSS y JS minificados

### **CDN Benefits:**
- ‚úÖ **Global Distribution** - CloudFront en m√∫ltiples regiones
- ‚úÖ **Edge Caching** - Cache en ubicaciones cercanas al usuario
